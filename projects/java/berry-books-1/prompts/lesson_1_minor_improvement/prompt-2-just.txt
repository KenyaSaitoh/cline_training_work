===============================================
小規模改善プロンプト【中：適切版】
===============================================

berry-books-1プロジェクトを以下の3点で改善してください。

## 1. 決済方法のEnum化

### 現状の課題
- CartSessionやOrderTranで決済方法をIntegerで管理
- getSettlementTypeName()メソッド内でif-elseによるハードコードされた変換ロジックが重複
- XHTMLファイルでも決済方法の値と表示名をハードコード

### 実施内容
- SettlementType Enumクラスをpro.kensait.berrybooks.commonパッケージに作成
- 決済方法コード（Integer）と表示名（String）を持つ
  - 1: 銀行振り込み
  - 2: クレジットカード
  - 3: 着払い
- コードからEnumを取得する機能
- コードから表示名を取得する機能（nullや不正値に対応）
- CartSessionとOrderTranの重複した変換ロジックをEnumに集約

---

## 2. エラーメッセージのプロパティ化

### 現状の課題
- CartBeanなど、エラーメッセージがJavaコード内にハードコード
- メッセージ変更時にコード修正とビルドが必要

### 実施内容
- src/main/resources/messages.propertiesファイルを作成
- エラーメッセージをキーと値のペアで定義（カート、住所、注文、在庫などのエラー）
- MessageUtilクラスをpro.kensait.berrybooks.commonパッケージに作成
  - ResourceBundleを使用してプロパティファイルからメッセージを取得
  - パラメータ置換にも対応
- 既存のハードコードされたエラーメッセージをプロパティファイル経由に変更

---

## 3. 住所判定ロジックの共通化

### 現状の課題
- DeliveryFeeServiceで"沖縄県"判定がハードコード
- 都道府県名の妥当性検証が行われていない
- 同様の判定ロジックが複数箇所で必要になる可能性

### 実施内容
- AddressUtilクラスをpro.kensait.berrybooks.utilパッケージに作成
- 47都道府県の配列を定数として定義
- 住所が正しい都道府県名で始まるかをチェックする機能
- DeliveryFeeServiceに沖縄県判定と送料無料判定のロジックを追加
- 既存の住所判定ロジックを共通化されたメソッドに置き換え


