# berry-books ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

## ğŸ“– æ¦‚è¦

Jakarta EE 10ã¨JSF (Jakarta Server Faces) 4.0ã‚’ä½¿ç”¨ã—ãŸã‚ªãƒ³ãƒ©ã‚¤ãƒ³æ›¸åº—ã€Œ**Berry Books**ã€ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚
æ›¸ç±æ¤œç´¢ã€ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆã€æ³¨æ–‡å‡¦ç†ãªã©ã®ECæ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

> **Note:** ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–**ã‚’æ‹…å½“ã—ã¾ã™ã€‚`berry-books-rest`ãªã©ã®é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨åŒã˜ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å…±æœ‰ã—ã¾ã™ã€‚

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã‚¬ã‚¤ãƒ‰

### å‰ææ¡ä»¶

- JDK 21ä»¥ä¸Š
- Gradle 8.xä»¥ä¸Š
- Payara Server 6ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®`payara6/`ã«é…ç½®ï¼‰
- HSQLDBï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®`hsqldb/`ã«é…ç½®ï¼‰

> **Note:** â‘  ã¨ â‘¡ ã®æ‰‹é †ã¯ã€ãƒ«ãƒ¼ãƒˆã®`README.md`ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### â‘¢ ä¾å­˜é–¢ä¿‚ã®ç¢ºèª

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ä»¥ä¸‹ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

- **â‘  HSQLDBã‚µãƒ¼ãƒãƒ¼** ï¼ˆ`./gradlew startHsqldb`ï¼‰
- **â‘¡ Payara Server** ï¼ˆ`./gradlew startPayara`ï¼‰

### â‘£ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹å§‹ã™ã‚‹ã¨ãã«1å›ã ã‘å®Ÿè¡Œ

```bash
# 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆï¼ˆã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒæ‹…å½“ï¼‰
./gradlew :projects:java:berry-books:setupHsqldb

# 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰
./gradlew :projects:java:berry-books:war

# 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
./gradlew :projects:java:berry-books:deploy
```

> **é‡è¦:** `setupHsqldb`ã¯**ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å®Ÿè¡Œ**ã—ã¦ãã ã•ã„ã€‚ä»–ã®Berry Booksãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ`berry-books-rest`ã€`berry-books-frontend`ï¼‰ã§ã‚‚åŒã˜ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

### â‘¤ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’çµ‚äº†ã™ã‚‹ã¨ãã«1å›ã ã‘å®Ÿè¡Œï¼ˆCleanUpï¼‰

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¢ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤
./gradlew :projects:java:berry-books:undeploy
```

### â‘¥ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆãƒ»æ›´æ–°ã®ãŸã³ã«å®Ÿè¡Œ

```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†ãƒ“ãƒ«ãƒ‰ã—ã¦å†ãƒ‡ãƒ—ãƒ­ã‚¤
./gradlew :projects:java:berry-books:war
./gradlew :projects:java:berry-books:deploy
```

## ğŸ“Š Excelãƒ•ã‚¡ã‚¤ãƒ«ã®å±•é–‹ï¼ˆä»•æ§˜æ›¸ã®ç¢ºèªï¼‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®`spec/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€è¨­è¨ˆä»•æ§˜æ›¸ãŒExcelå½¢å¼ (.xlsx) ã§æ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚
Excelãƒ•ã‚¡ã‚¤ãƒ«ã®å†…éƒ¨æ§‹é€ ï¼ˆXMLãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã‚’ç¢ºèªã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å±•é–‹ã§ãã¾ã™ã€‚

### Excelãƒ•ã‚¡ã‚¤ãƒ«ã®å±•é–‹æ–¹æ³•

```bash
# specãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ã™ã¹ã¦ã®.xlsxãƒ•ã‚¡ã‚¤ãƒ«ã‚’å±•é–‹
./gradlew exploreExcelFiles -PtargetDir=projects/java/berry-books/spec
```

### å®Ÿè¡Œçµæœ

å®Ÿè¡Œã™ã‚‹ã¨ã€å„Excelãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒã˜éšå±¤ã«ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ããƒ•ã‚©ãƒ«ãƒ€ãŒä½œæˆã•ã‚Œã€ãã®ä¸­ã«XMLæ§‹é€ ãŒå±•é–‹ã•ã‚Œã¾ã™ï¼š

```
projects/java/berry-books/spec/
â”œâ”€â”€ berry-books_è¨­è¨ˆæ›¸.xlsx      # å…ƒã®Excelãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ 20251029143025/              # å±•é–‹ã•ã‚ŒãŸãƒ•ã‚©ãƒ«ãƒ€ï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰
    â”œâ”€â”€ [Content_Types].xml
    â”œâ”€â”€ _rels/
    â”‚   â””â”€â”€ .rels
    â”œâ”€â”€ docProps/
    â”‚   â”œâ”€â”€ app.xml
    â”‚   â””â”€â”€ core.xml
    â””â”€â”€ xl/
        â”œâ”€â”€ workbook.xml
        â”œâ”€â”€ worksheets/
        â”‚   â”œâ”€â”€ sheet1.xml
        â”‚   â”œâ”€â”€ sheet2.xml
        â”‚   â””â”€â”€ ...
        â”œâ”€â”€ styles.xml
        â”œâ”€â”€ sharedStrings.xml
        â””â”€â”€ _rels/
```

### å±•é–‹ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®æ´»ç”¨ä¾‹

- **worksheets/sheet1.xml**: å„ã‚·ãƒ¼ãƒˆã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ç¢ºèª
- **sharedStrings.xml**: ã‚»ãƒ«å†…ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª
- **styles.xml**: ã‚»ãƒ«ã®æ›¸å¼æƒ…å ±ã‚’ç¢ºèª
- **workbook.xml**: ãƒ–ãƒƒã‚¯å…¨ä½“ã®æ§‹é€ ã‚’ç¢ºèª

> **Note**: Excelãƒ•ã‚¡ã‚¤ãƒ« (.xlsx) ã¯ã€å†…éƒ¨çš„ã«ZIPåœ§ç¸®ã•ã‚ŒãŸXMLãƒ•ã‚¡ã‚¤ãƒ«ã®é›†åˆä½“ã§ã™ã€‚ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§Office Open XMLå½¢å¼ã®å†…éƒ¨æ§‹é€ ã‚’å­¦ç¿’ã§ãã¾ã™ã€‚

## ğŸ“ ã‚¢ã‚¯ã‚»ã‚¹URL

ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€ä»¥ä¸‹ã®URLã«ã‚¢ã‚¯ã‚»ã‚¹ï¼š

- **ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸**: http://localhost:8080/berry-books

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆã¯JUnit 5ã¨Mockitoã‚’ä½¿ç”¨ã—ã¦å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚

#### ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ

```bash
./gradlew :projects:java:berry-books:test
```

#### ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã‚’å®Ÿè¡Œ

```bash
# OrderServiceã®ãƒ†ã‚¹ãƒˆã®ã¿ã‚’å®Ÿè¡Œ
./gradlew :projects:java:berry-books:test --tests "*OrderServiceTest"

# BookServiceã®ãƒ†ã‚¹ãƒˆã®ã¿ã‚’å®Ÿè¡Œ
./gradlew :projects:java:berry-books:test --tests "*BookServiceTest"
```

#### ãƒ†ã‚¹ãƒˆã®ç¶™ç¶šçš„å®Ÿè¡Œï¼ˆå¤‰æ›´æ¤œçŸ¥ï¼‰

```bash
./gradlew :projects:java:berry-books:test --continuous
```

### ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆã®ç¢ºèª

ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã€HTMLãƒ¬ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã™ï¼š

```
projects/java/berry-books/build/reports/tests/test/index.html
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã¨ãƒ†ã‚¹ãƒˆçµæœã®è©³ç´°ãŒç¢ºèªã§ãã¾ã™ã€‚

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¢ºèªï¼ˆJaCoCoï¼‰

```bash
# ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
./gradlew :projects:java:berry-books:jacocoTestReport

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã®å ´æ‰€
# projects/java/berry-books/build/reports/jacoco/test/html/index.html
```

### ãƒ†ã‚¹ãƒˆã®æ§‹æˆ

#### ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®ãƒ†ã‚¹ãƒˆ

ä»¥ä¸‹ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚¯ãƒ©ã‚¹ã«å¯¾å¿œã™ã‚‹ãƒ†ã‚¹ãƒˆãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ï¼š

| ã‚µãƒ¼ãƒ“ã‚¹ã‚¯ãƒ©ã‚¹ | ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ | ãƒ†ã‚¹ãƒˆå†…å®¹ |
|--------------|------------|----------|
| `OrderService` | `OrderServiceTest` | æ³¨æ–‡å‡¦ç†ã€æ³¨æ–‡å±¥æ­´å–å¾—ã€åœ¨åº«ãƒã‚§ãƒƒã‚¯ |
| `BookService` | `BookServiceTest` | æ›¸ç±æ¤œç´¢ï¼ˆä¸»ã‚­ãƒ¼ã€ã‚«ãƒ†ã‚´ãƒªã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼‰ |
| `CategoryService` | `CategoryServiceTest` | ã‚«ãƒ†ã‚´ãƒªä¸€è¦§å–å¾—ã€ã‚«ãƒ†ã‚´ãƒªãƒãƒƒãƒ—ä½œæˆ |
| `CustomerService` | `CustomerServiceTest` | é¡§å®¢ç™»éŒ²ã€èªè¨¼ã€æ¤œç´¢ |
| `DeliveryFeeService` | `DeliveryFeeServiceTest` | é…é€æ–™é‡‘è¨ˆç®—ï¼ˆé€šå¸¸ã€æ²–ç¸„ã€é€æ–™ç„¡æ–™ï¼‰ |

#### ãƒ†ã‚¹ãƒˆã®ç‰¹å¾´

- **JUnit 5** ã‚’ä½¿ç”¨ï¼ˆ`@ExtendWith(MockitoExtension.class)`ï¼‰
- **Mockito** ã§DAOå±¤ã‚’ãƒ¢ãƒƒã‚¯åŒ–
- **AAA (Arrange-Act-Assert)** ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ã£ãŸæ§‹é€ 
- æ­£å¸¸ç³»ã¨ç•°å¸¸ç³»ã®ä¸¡æ–¹ã‚’ã‚«ãƒãƒ¼
- å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆã¨ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã‚’å«ã‚€

#### ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ã®å ´æ‰€

```
projects/berry-books/
â””â”€â”€ src/
    â””â”€â”€ test/
        â””â”€â”€ java/
            â””â”€â”€ dev/berry/service/
                â”œâ”€â”€ order/
                â”‚   â””â”€â”€ OrderServiceTest.java
                â”œâ”€â”€ book/
                â”‚   â””â”€â”€ BookServiceTest.java
                â”œâ”€â”€ category/
                â”‚   â””â”€â”€ CategoryServiceTest.java
                â”œâ”€â”€ customer/
                â”‚   â””â”€â”€ CustomerServiceTest.java
                â””â”€â”€ delivery/
                    â””â”€â”€ DeliveryFeeServiceTest.java
```

### ã‚ˆãä½¿ã†ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰

```bash
# ãƒ†ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰ã—ã¦å®Ÿè¡Œ
./gradlew :projects:java:berry-books:clean :projects:java:berry-books:test

# ãƒ†ã‚¹ãƒˆçµæœã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è©³ç´°è¡¨ç¤º
./gradlew :projects:java:berry-books:test --info

# å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã®ã¿å†å®Ÿè¡Œ
./gradlew :projects:java:berry-books:test --rerun-tasks

# ãƒ†ã‚¹ãƒˆã¨ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ä¸€æ‹¬ç”Ÿæˆ
./gradlew :projects:java:berry-books:test :projects:java:berry-books:jacocoTestReport
```

### CI/CDç’°å¢ƒã§ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒã§ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

```bash
# ãƒ“ãƒ«ãƒ‰ã¨ãƒ†ã‚¹ãƒˆã‚’ä¸€æ‹¬å®Ÿè¡Œ
./gradlew :projects:java:berry-books:build

# ãƒ†ã‚¹ãƒˆå¤±æ•—æ™‚ã«å‡¦ç†ã‚’åœæ­¢
./gradlew :projects:java:berry-books:test --fail-fast
```

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
projects/berry-books/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ dev/berry/
â”‚   â”‚   â”‚       â”œâ”€â”€ view/           # JSF Managed Bean
â”‚   â”‚   â”‚       â”œâ”€â”€ service/        # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”‚       â”œâ”€â”€ dao/            # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤
â”‚   â”‚   â”‚       â”œâ”€â”€ entity/         # JPAã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”‚   â”‚       â””â”€â”€ web/cart/       # ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ resources/
â”‚   â”‚   â”‚   â”œâ”€â”€ META-INF/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ persistence.xml  # JPAè¨­å®š
â”‚   â”‚   â”‚   â””â”€â”€ static/css/
â”‚   â”‚   â”‚       â””â”€â”€ style.css        # ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ
â”‚   â”‚   â””â”€â”€ webapp/
â”‚   â”‚       â”œâ”€â”€ *.xhtml              # Facelets ãƒ“ãƒ¥ãƒ¼
â”‚   â”‚       â””â”€â”€ WEB-INF/
â”‚   â”‚           â”œâ”€â”€ web.xml
â”‚   â”‚           â””â”€â”€ beans.xml
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ java/
â”‚           â””â”€â”€ dev/berry/service/   # ã‚µãƒ¼ãƒ“ã‚¹å±¤ã®ãƒ†ã‚¹ãƒˆ
â”‚               â”œâ”€â”€ order/           # æ³¨æ–‡ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆ
â”‚               â”œâ”€â”€ book/            # æ›¸ç±ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆ
â”‚               â”œâ”€â”€ category/        # ã‚«ãƒ†ã‚´ãƒªã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆ
â”‚               â”œâ”€â”€ customer/        # é¡§å®¢ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆ
â”‚               â””â”€â”€ delivery/        # é…é€æ–™é‡‘ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ sql/
â”‚   â””â”€â”€ hsqldb/                      # SQLã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ build/
    â”œâ”€â”€ libs/
    â”‚   â””â”€â”€ berry-books.war
    â””â”€â”€ reports/
        â”œâ”€â”€ tests/test/              # ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ
        â””â”€â”€ jacoco/test/html/        # ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
```

## ğŸ”§ ä½¿ç”¨ã—ã¦ã„ã‚‹æŠ€è¡“

### æœ¬ç•ªç’°å¢ƒ

- **Jakarta EE 10**
- **Payara Server 6**
- **Jakarta Faces (JSF) 4.0** - Faceletãƒ“ãƒ¥ãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- **Jakarta Persistence (JPA) 3.1** - Hibernateå®Ÿè£…
- **Jakarta Transactions (JTA)**
- **Jakarta CDI 4.0**
- **HSQLDB 2.7.x**

### ãƒ†ã‚¹ãƒˆç’°å¢ƒ

- **JUnit 5** - ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Mockito** - ãƒ¢ãƒƒã‚¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **JaCoCo** - ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ„ãƒ¼ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

## ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜

- **ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼**: `#CF3F4E` (ã‚¹ãƒˆãƒ­ãƒ™ãƒªãƒ¼ãƒ¬ãƒƒãƒ‰)
- **ã‚µã‚¤ãƒˆå**: Berry Books
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³**: ãƒ¢ãƒ€ãƒ³ãªã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚·ãƒ£ãƒ‰ã‚¦åŠ¹æœ

## ğŸ“¦ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

```
dev.berry/
â”œâ”€â”€ view/                # JSF Managed Bean
â”‚   â”œâ”€â”€ BookSearchBean.java
â”‚   â”œâ”€â”€ CartBean.java
â”‚   â””â”€â”€ OrderBean.java
â”œâ”€â”€ service/             # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆCDI Beanï¼‰
â”‚   â”œâ”€â”€ book/
â”‚   â”œâ”€â”€ category/
â”‚   â””â”€â”€ order/
â”œâ”€â”€ dao/                 # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤
â”‚   â”œâ”€â”€ BookDao.java
â”‚   â”œâ”€â”€ CategoryDao.java
â”‚   â”œâ”€â”€ StockDao.java
â”‚   â”œâ”€â”€ OrderTranDao.java
â”‚   â””â”€â”€ OrderDetailDao.java
â”œâ”€â”€ entity/              # JPAã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”‚   â”œâ”€â”€ Book.java
â”‚   â”œâ”€â”€ Category.java
â”‚   â”œâ”€â”€ Publisher.java
â”‚   â”œâ”€â”€ Stock.java
â”‚   â”œâ”€â”€ OrderTran.java
â”‚   â””â”€â”€ OrderDetail.java
â””â”€â”€ web/cart/            # ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ç”¨
    â””â”€â”€ CartItem.java
```

## ğŸ¯ ä¸»ãªæ©Ÿèƒ½

### 1. æ›¸ç±æ¤œç´¢ãƒ»é–²è¦§ (`bookSearch.xhtml`)
- ã‚«ãƒ†ã‚´ãƒªã‚„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ã‚ˆã‚‹æ›¸ç±æ¤œç´¢
- æ¤œç´¢çµæœã®ä¸€è¦§è¡¨ç¤º
- ã‚«ãƒ¼ãƒˆã¸ã®è¿½åŠ 

### 2. ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆ (`cart.xhtml`)
- æ›¸ç±ã‚’ã‚«ãƒ¼ãƒˆã«è¿½åŠ 
- æ•°é‡å¤‰æ›´ã€å‰Šé™¤
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ã‚³ãƒ¼ãƒ—ã§ç®¡ç†
- åˆè¨ˆé‡‘é¡ã®è‡ªå‹•è¨ˆç®—

### 3. æ³¨æ–‡å‡¦ç† (`order.xhtml`)
- é…é€å…ˆå…¥åŠ›
- æ±ºæ¸ˆæ–¹æ³•é¸æŠï¼ˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰/ä»£é‡‘å¼•æ›/éŠ€è¡ŒæŒ¯è¾¼ï¼‰
- åœ¨åº«ãƒã‚§ãƒƒã‚¯
- æ³¨æ–‡ç¢ºå®š

### 4. æ³¨æ–‡å±¥æ­´ (`orderHistory.xhtml`)
- éå»ã®æ³¨æ–‡å±¥æ­´è¡¨ç¤º
- æ³¨æ–‡è©³ç´°è¡¨ç¤º

## ğŸ“ ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹è¨­å®šã«ã¤ã„ã¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ãƒ«ãƒ¼ãƒˆã®`build.gradle`ã§å®šç¾©ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚

### è¨­å®šå†…å®¹

- **JNDIå**: `jdbc/HsqldbDS`
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: `testdb`
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼**: `SA`
- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: ï¼ˆç©ºæ–‡å­—ï¼‰
- **TCPã‚µãƒ¼ãƒãƒ¼**: `localhost:9001`

ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¯Payara Serverã®ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®šã«ç™»éŒ²ã•ã‚Œã¾ã™ã€‚

### âš ï¸ æ³¨æ„äº‹é …

- HSQLDB Databaseã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
- ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ä½œæˆã¯Payara Serverèµ·å‹•å¾Œã«å®Ÿè¡Œã—ã¦ãã ã•ã„
- åˆå›ã®ã¿å®Ÿè¡ŒãŒå¿…è¦ã§ã™ï¼ˆ2å›ç›®ä»¥é™ã¯ä¸è¦ï¼‰

## ğŸ›‘ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢ã™ã‚‹

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¢ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
./gradlew :projects:java:berry-books:undeploy
```

### Payara Serverå…¨ä½“ã‚’åœæ­¢

```bash
./gradlew stopPayara
```

### HSQLDBã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢

```bash
./gradlew stopHsqldb
```

## ğŸ” ãƒ­ã‚°ç›£è¦–

åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒ­ã‚°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ï¼š

```bash
tail -f -n 50 payara6/glassfish/domains/domain1/logs/server.log
```

> **Note**: Windowsã§ã¯**Git Bash**ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

## ğŸ§ª ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒªã‚»ãƒƒãƒˆ

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸçŠ¶æ…‹ã«æˆ»ã—ãŸã„å ´åˆï¼š

```bash
# HSQLDBã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢
./gradlew stopHsqldb

# ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
rm -f hsqldb/data/testdb.*

# HSQLDBã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•
./gradlew startHsqldb

# åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
./gradlew :projects:java:berry-books:setupHsqldb
```

## ğŸ“š ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆ

```
JSF View (Facelets XHTML)
    â†“
JSF Managed Bean (@Named, @ViewScoped/@SessionScoped)
    â†“
CDI Service (@ApplicationScoped)
    â†“
DAO (@ApplicationScoped)
    â†“
JPA Entity (@Entity)
    â†“
Database (HSQLDB)
```

### ä¸»è¦ã‚¯ãƒ©ã‚¹

#### 1. BookSearchBean (JSF Managed Bean)

`@Named`ã¨`@ViewScoped`ã‚’ä½¿ç”¨ã€‚æ›¸ç±æ¤œç´¢æ©Ÿèƒ½ã‚’æä¾›ã€‚

#### 2. CartBean (JSF Managed Bean)

`@Named`ã¨`@SessionScoped`ã‚’ä½¿ç”¨ã€‚ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆç®¡ç†ã‚’æ‹…å½“ã€‚

#### 3. OrderBean (JSF Managed Bean)

`@Named`ã¨`@ViewScoped`ã‚’ä½¿ç”¨ã€‚æ³¨æ–‡å‡¦ç†ã¨æ³¨æ–‡å±¥æ­´è¡¨ç¤ºã‚’å®Ÿè£…ã€‚

## ğŸ”— é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

- **berry-books-rest**: åŒã˜ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹REST APIãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆé¡§å®¢ç®¡ç†APIï¼‰
- **berry-books-frontend**: Reactã§æ§‹ç¯‰ã•ã‚ŒãŸç®¡ç†è€…ç”»é¢ï¼ˆé¡§å®¢ä¸€è¦§ãƒ»çµ±è¨ˆæƒ…å ±è¡¨ç¤ºï¼‰

> **Note:** ã“ã‚Œã‚‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯**ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆberry-booksï¼‰ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

## ğŸ“– å‚è€ƒãƒªãƒ³ã‚¯

- [Jakarta EE 10 Platform](https://jakarta.ee/specifications/platform/10/)
- [Jakarta Server Faces 4.0](https://jakarta.ee/specifications/faces/4.0/)
- [Facelets View Declaration Language](https://jakarta.ee/specifications/faces/4.0/jakarta-faces-4.0.html#facelets)
- [Mojarra (JSF Reference Implementation)](https://eclipse-ee4j.github.io/mojarra/)

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯æ•™è‚²ç›®çš„ã§ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚
